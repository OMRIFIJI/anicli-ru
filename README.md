# anicli-ru
Интерфейс командной строки для поиска и просмотра аниме, написаный на Go.

<img src="https://go.dev/blog/gopher/header.jpg" alt="Gopher" width="300"/>

## Зависимости
1. [mpv](https://github.com/mpv-player/mpv)
2. [ffmpeg](https://github.com/FFmpeg/FFmpeg)

## Что умеет?
Программа ищет аниме через [animego](https://animego.org/), 
а далее парсит и обрабатывает встроенные ссылки, чтобы можно было
передать их в mpv. При просмотре можно выбирать и менять
озвучку и качество видео.

Приоритет плееров задан следующим образом:
1. aniboom
2. kodik
3. vk
4. sibnet
То есть, если в aniboom и kodik доступно видео в качестве 720,
пользователю будет предложено видео, полученное из kodik.
Плеер sibnet может несколько раз игнорировать http запросы
прежде чем ответить, поэтому видео из этого плеера могут запускаться 
намного медленее остальных.

В ближайших планах:
- [x] Динамическая отрисовка графики
- [x] Собственный парсинг аниме
- [ ] Сохранять историю просмотра
- [ ] Опция для продолжения просмотра
- [ ] Добавить поддержку VLC
- [ ] Подправить костыли в коде

## Установка
Для начала устанавливаем зависимости любым удобным для вас способом:
1. [mpv](https://github.com/mpv-player/mpv)
2. [ffmpeg](https://github.com/FFmpeg/FFmpeg)

Далее скачиваем или собираем бинарник `anicli-ru`. Как только найду свободное время добавлю его в релиз.
На данный момент бинарник можно собрать самому - инструкция ниже.

Если хотим чтобы можно было запускать приложение, не указывая полный путь,
то добавляем `anicli-ru` в одну из директорий **PATH**.\
Например: `sudo cp anicli-ru /usr/bin`

## Сборка
1. `git clone https://github.com/OMRIFIJI/anicli-ru.git`
2. `cd anicli-ru`
3. `go build -ldflags "-s -w" -o anicli-ru ./cmd/main.go`

## Проблемы и способы их решения
При установке `ffmpeg` из исходников или на таких системах, как gentoo.
Важно добавить зависимость `libxml2` она необходима для расшифровки dash.
