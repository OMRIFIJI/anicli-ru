# anicli-ru
Интерфейс командной строки для поиска и просмотра аниме, написаный на Go.

<img src="https://go.dev/blog/gopher/header.jpg" alt="Gopher" width="300"/>

## Зависимости
1. [mpv](https://github.com/mpv-player/mpv)
2. [ffmpeg](https://github.com/FFmpeg/FFmpeg)

## Что умеет?
Программа ищет аниме через [animego](https://animego.org/), 
а далее взаимодействует с встроенными ссылками на плееры, 
чтобы получить прямые ссылки на видео и передать их в mpv.
Некоторые плееры, в частности aniboom, предлагают DASH.
Для работы с ними mpv использует ffmpeg.
Ссылки на видео разбиваются по озвучке и качеству видео.

Приоритет плееров задан следующим образом:
1. aniboom
2. kodik
3. vk
4. sibnet

То есть, если в aniboom и kodik доступно видео в качестве 720,
пользователю будет предложено видео, полученное из aniboom.
Плеер sibnet может несколько раз игнорировать http запросы
прежде чем ответить, поэтому видео из этого плеера могут запускаться 
намного медленее остальных.

В ближайших планах:
- [x] Динамическая отрисовка графики
- [x] Собственный парсинг аниме
- [ ] Опция для продолжения просмотра
- [ ] Искать аниме не только на animego
- [ ] Добавить поддержку VLC
- [ ] Сделать код читабельнее

## Установка
Для начала устанавливаем зависимости любым удобным для вас способом:
1. [mpv](https://github.com/mpv-player/mpv)
2. [ffmpeg](https://github.com/FFmpeg/FFmpeg)

Теперь скачиваем или собираем бинарник `anicli-ru`. 
Как только найду свободное время сделаю релиз и добавлю его туда.
На данный момент бинарник не скачать, но можно собрать самому - инструкция ниже.

Если хотим, чтобы можно было запускать приложение, не указывая полный путь,
то добавляем `anicli-ru` в одну из директорий **PATH**.\
Например: `sudo cp anicli-ru /usr/bin`

## Сборка
1. `git clone https://github.com/OMRIFIJI/anicli-ru.git`
2. `cd anicli-ru`
3. `go build -ldflags "-s -w" -o anicli-ru ./cmd/main.go`

## Проблемы и способы их решения
При установке `ffmpeg` из исходников или на таких системах, как gentoo.
Важно добавить зависимость `libxml2` она необходима для расшифровки dash.
