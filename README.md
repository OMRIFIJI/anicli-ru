# anicli-ru

Интерфейс командной строки для поиска и просмотра аниме, написаный на Go.

<img src="https://go.dev/blog/gopher/header.jpg" alt="Gopher" width="300"/>

## Что умеет?
https://github.com/user-attachments/assets/e498ea62-478f-4bc0-b496-847f985f3220

Поиск аниме осуществляется через [yummyanime](https://yummy-anime.ru/) и зеркало [animego](https://animego.club/).
Прямые ссылки на видео для mpv запрашиваются у встроенных в сайт плееров.
Некоторые плееры, в частности aniboom, предлагают DASH.
Для работы с ними mpv может использовать ffmpeg.
Ссылки на видео группируются по озвучке и качеству видео, 
в каждой группе выбирается видео плеера высшего приоритета.
Постарался раздать приоритет плеерам в соответствии с их стабильностью.

Плеер sibnet может игнорировать http запросы по несколько раз
прежде чем ответить, поэтому видео от этого плеера в среднем будут запускаться 
намного медленее остальных.

В ближайших планах:
- [x] Динамическая отрисовка графики
- [x] Собственный парсинг аниме
- [x] Поддержка Windows
- [x] Опция для продолжения просмотра
- [ ] Добавить поддержку VLC

## Установка
Просто скачайте готовый бинарник из последнего [релиза](https://github.com/OMRIFIJI/anicli-ru/releases). Для воспроизведения видео используется плеер `mpv` и `ffmpeg`.

## Источники
Источники задаются в конфиге, стандартный конфиг будет включать в себя все доступные источники:
```
[Providers]
animego = 'animego.club'
yummyanime = 'yummy-anime.ru'
```
Если один из источников недоступен, то можно заменить полное доменное имя на его зеркало.
Если вы хотите отключить источник, то удалите всю соответствующую ему строчку.
Программа создаст стандартный конфиг по одному из следующих путей:
1. `$XDG_CONFIG_HOME/anicli-ru/config.toml`
2. `$HOME/anicli-ru/config.toml`

## Windows
* Не забудьте добавить `mpv` в PATH.
* Рекомендую использовать `powershell`.
* Через `cmd` программа тоже будет работать, но новый [буфер экрана](https://learn.microsoft.com/ru-ru/windows/console/console-screen-buffers) она создавать не будет, вместо этого она будет захламлять ваш буфер.
* Конфиг находится в `%LOCALAPPDATA%\anicli-ru\config.toml`

## Проблемы и способы их решения
При сборке `ffmpeg` из исходников важно добавить зависимость `libxml2` для поддержки DASH.
