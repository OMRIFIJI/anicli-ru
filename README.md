# anicli-ru

Интерфейс командной строки для поиска и просмотра аниме, написаный на Go.

<img src="https://go.dev/blog/gopher/header.jpg" alt="Gopher" width="300"/>

## Что умеет?
https://github.com/user-attachments/assets/e498ea62-478f-4bc0-b496-847f985f3220

Поиск аниме осуществляется парсингом [animego](https://animego.org/).
Прямые ссылки на видео для mpv запрашиваются у встроенных в animego плееров.
Некоторые плееры, в частности aniboom, предлагают DASH.
Для работы с ними mpv может использовать ffmpeg.
Ссылки на видео группируются по озвучке и качеству видео, 
в каждой группе выбирается ссылка приоритетного плеера.

Приоритет плееров задан следующим образом:
1. aniboom
2. kodik
3. vk
4. sibnet

То есть, если aniboom и kodik предлагают видео с одной и той же озвучкой
в одинаковом качестве, пользователю будет предложено видео, полученное из aniboom.
Плеер sibnet может игнорировать http запросы по несколько раз
прежде чем ответить, поэтому видео от этого плеера в среднем будут запускаться 
намного медленее остальных.

В ближайших планах:
- [x] Динамическая отрисовка графики
- [x] Собственный парсинг аниме
- [ ] Опция для продолжения просмотра
- [ ] Искать аниме не только на animego
- [ ] Добавить поддержку VLC
- [ ] Сделать код читабельнее

## Установка
1. Для работы приложения требуются следующие утилиты. Установите их удобным для вас способом:
	- [mpv](https://github.com/mpv-player/mpv) - видеоплеер с поддержкой потокового воспроизведения.
	- [ffmpeg](https://github.com/FFmpeg/FFmpeg) - инструмент для работы с мультимедиа.
2. Загрузка или сборка приложения `anicli-ru`: 
	- Скачать готовый бинарник можно на странице [релиза](https://github.com/OMRIFIJI/anicli-ru/releases/tag/v2.0.0).
	- Инструкции по сборке находятся ниже (в разделе "Сборка").
 
Чтобы запускать **anicli-ru** из любой директории без указания полного пути, добавьте бинарник в одну из системных директорий, входящих в PATH. Например:
```bash
sudo cp anicli-ru /usr/bin
```

## Сборка
Собирать приложение рекомендуется с флагами указанными ниже:
```bash
git clone https://github.com/OMRIFIJI/anicli-ru.git &&
cd anicli-ru &&
go build -ldflags "-s -w" -o anicli-ru ./cmd/main.go
```

## Проблемы и способы их решения
При сборке `ffmpeg` из исходников или на системах вроде Gentoo важно добавить зависимость `libxml2` для обеспечения поддержки DASH.
